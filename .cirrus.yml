environment:
    gitconfig: "ENCRYPTED[!644deff6a47bcf536d9370d3de011bb787a8f258f43be1cc108ff422c8401f69c8582a07784c20132eca9c51650eec62!]"
    credentials: "ENCRYPTED[!c984fd75279100c17c9d87ce977ba1d15f7b0bdf6102ac95decbc581e9c17026b46fdf3e2dacf1051967d730429b312c!]"
    rcloneconfig: "ENCRYPTED[!c6dbdfefa8362a6445dcb9d4e660e9b73e4f423dae19b5a2dee759a9286f10bad5432628b8ccd36ec9b08f4c8eeaba06!]"
    tokentl: "ENCRYPTED[!092501981e947d5da8a498b9c2f0c6b420ebf78cbcdea99b8c9790fa8c5626911549ae7c0abb1799bbe1e75d52511243!]"
    idtl: "ENCRYPTED[!a924f62813282f39f1d2b9aa6062cfd81779d9f6ed1dc7a961b77c222f7006671ad6f2691b6025d40e853f6026e200c0!]"

task:
    name: "Setting Up, Sync, Building and Uploading..."
    timeout_in: 480m
    container:
        image: thisfor/build:latest
        cpu: 8
        memory: 32G
    gitconfig_file:
        path: /home/cirrus/.gitconfig
        variable_name: gitconfig
    credentials_config_file:
        path: /home/cirrus/.git-credentials
        variable_name: credentials
    rclone_config_file:
        path: /home/cirrus/.rclone.conf
        variable_name: rcloneconfig

    Build-Setup_background_script:
        - curl -s "https://api.telegram.org/bot$tokentl/sendMessage" -d "chat_id=$idtl" -d "text=Build Started! https://cirrus-ci.com/task/$CIRRUS_TASK_ID"
        - mkdir -p ~/rom ~/ccache
        - ./collect.sh -d

    Storage-Checker_background_script:
        - df -h && lsblk && ls -l -a -h
        - ./collect.sh -m

    Sync_script:
        - ./compile.sh -s

    Build_script:
        - ./compile.sh -r

    Upload_script:
        - ./collect.sh -u